# 快速测试指南 - 密码重置功能

## 🚀 快速开始

### 启动应用
```bash
cd /Users/yangpeng/Documents/Project/MRM/MRM_1029
npm run dev
```

应用将在 http://localhost:3000 启动

## 📝 测试场景 1：完整的密码重置流程

### 步骤 1：打开登录对话框
1. 打开浏览器访问 http://localhost:3000
2. 点击右上角的"登录"按钮
3. 看到登录对话框

### 步骤 2：进入忘记密码流程
1. 在登录表单底部，点击"忘记密码？"链接
2. 看到"忘记密码"页面

### 步骤 3：输入邮箱
1. 输入任意有效的邮箱地址，例如：`test@example.com`
2. 点击"发送验证码"按钮
3. 等待 1 秒（模拟发送过程）
4. 看到绿色成功消息："验证码已发送到 test@example.com（演示模式：123456）"
5. **记住验证码**（例如：123456）
6. 2 秒后自动跳转到验证码输入页面

### 步骤 4：输入验证码
1. 在大号的验证码输入框中输入刚才看到的验证码
2. 例如输入：`123456`
3. 点击"验证"按钮
4. 看到"验证成功！"消息
5. 自动跳转到密码重置页面

### 步骤 5：设置新密码
1. 在"新密码"框中输入：`newpass123`
2. 在"确认新密码"框中输入：`newpass123`
3. 点击"重置密码"按钮
4. 看到"密码重置成功！正在返回登录..."
5. 自动返回登录页面

### 步骤 6：使用新密码登录
1. 输入用户名（任意）
2. 输入新密码：`newpass123`（至少 6 位）
3. 点击"登录"
4. 登录成功！

## 🧪 测试场景 2：错误处理

### 测试无效邮箱格式
1. 打开"忘记密码"页面
2. 输入无效邮箱：`invalid-email`
3. 点击"发送验证码"
4. ✅ 应该看到错误消息："请输入有效的邮箱地址"

### 测试错误的验证码
1. 进入验证码输入页面
2. 输入错误的验证码：`000000`
3. 点击"验证"
4. ✅ 应该看到错误消息："验证码错误，请重新输入"

### 测试密码不匹配
1. 进入密码重置页面
2. 新密码输入：`password123`
3. 确认密码输入：`password456`（不同）
4. 点击"重置密码"
5. ✅ 应该看到错误消息："两次输入的密码不一致"

### 测试密码太短
1. 新密码输入：`123`（少于 6 位）
2. 确认密码输入：`123`
3. 点击"重置密码"
4. ✅ 应该看到错误消息："密码长度至少为 6 位"

## 🔄 测试场景 3：导航功能

### 测试返回按钮
1. 在"忘记密码"页面，点击左上角的返回箭头 ←
2. ✅ 应该返回到登录页面

### 测试"返回登录"链接
1. 在任意密码重置流程页面底部
2. 点击"返回登录"或"重新发送验证码"
3. ✅ 应该正确导航

### 测试关闭对话框
1. 在任意页面点击对话框外部或 ESC 键
2. ✅ 对话框应该关闭

## 📱 测试场景 4：响应式设计

### 桌面端测试
1. 使用标准浏览器窗口（≥768px）
2. ✅ 对话框应该居中显示
3. ✅ 所有元素清晰可见

### 移动端测试
1. 打开浏览器开发者工具（F12）
2. 切换到移动设备视图（iPhone/Android）
3. 测试所有流程
4. ✅ 布局应该适应小屏幕
5. ✅ 输入框和按钮易于点击

## 🎨 UI/UX 检查清单

### 视觉反馈
- [ ] 成功消息显示为绿色背景 + 勾号图标
- [ ] 错误消息显示为红色背景 + 警告图标
- [ ] 加载时按钮显示"...中"状态
- [ ] 加载时输入框被禁用

### 交互体验
- [ ] 验证码输入框为大号等宽字体
- [ ] 验证码自动过滤非数字字符
- [ ] 密码输入框隐藏密码字符
- [ ] 所有按钮有 hover 效果
- [ ] 链接有 hover 效果

### 文字和图标
- [ ] 所有文字清晰易读
- [ ] 邮件图标显示在邮箱输入框
- [ ] 返回箭头图标显示正确
- [ ] 提示信息准确

## 🐛 已知限制（演示模式）

### 当前不支持的功能
1. **真实邮件发送**
   - 验证码在页面显示，不通过邮件发送
   - 生产环境需要集成邮件服务

2. **数据持久化**
   - 密码重置不会保存到数据库
   - 刷新页面后状态丢失

3. **验证码过期**
   - 验证码不会过期
   - 生产环境应该设置 10 分钟有效期

4. **频率限制**
   - 可以无限次发送验证码
   - 生产环境应该限制频率

5. **安全验证**
   - 没有 CAPTCHA
   - 没有 IP 限制
   - 没有暴力破解防护

## ✅ 验收标准

### 功能完整性
- [x] 用户可以通过邮箱重置密码
- [x] 验证码验证正确
- [x] 密码设置成功
- [x] 流程可以完整走通

### 错误处理
- [x] 所有输入都有验证
- [x] 错误消息清晰准确
- [x] 不会因为错误输入而崩溃

### 用户体验
- [x] 流程清晰易懂
- [x] 导航便捷
- [x] 视觉反馈及时
- [x] 响应式设计良好

## 📊 性能测试

### 加载速度
- 对话框应该立即打开（< 100ms）
- 表单提交响应应该在 1 秒内
- 页面切换应该流畅无卡顿

### 内存占用
- 打开/关闭对话框不应该造成内存泄漏
- 状态管理高效

## 🔐 安全测试（待实现）

### 生产环境需要测试
- [ ] HTTPS 强制加密
- [ ] 验证码无法被猜测
- [ ] 重置令牌安全
- [ ] SQL 注入防护
- [ ] XSS 攻击防护
- [ ] CSRF 防护

## 📞 问题反馈

### 如果遇到问题
1. 检查控制台错误（F12 → Console）
2. 检查网络请求（F12 → Network）
3. 查看完整错误堆栈
4. 记录复现步骤

### 常见问题

**Q: 验证码没有显示？**
A: 检查成功消息中是否包含验证码。演示模式会在消息中显示。

**Q: 无法输入验证码？**
A: 验证码输入框只接受数字，尝试输入 6 位数字。

**Q: 重置后无法登录？**
A: 当前为演示模式，密码不会真正保存。只要输入 6 位以上的密码都可以登录。

**Q: 对话框无法关闭？**
A: 点击对话框外部或按 ESC 键。

## 🎯 下一步

### 开发环境
1. 继续本地测试和调试
2. 修复发现的问题
3. 优化用户体验

### 准备生产环境
1. 集成邮件服务（SendGrid/AWS SES）
2. 创建后端 API
3. 添加数据库支持
4. 实施安全措施
5. 性能优化

### 部署
1. 构建生产版本：`npm run build`
2. 测试生产构建：`npm start`
3. 部署到服务器
4. 配置 HTTPS
5. 监控和日志

## 📚 相关文档

- [LOGIN_FEATURE.md](./LOGIN_FEATURE.md) - 登录功能总览
- [PASSWORD_RESET_FEATURE.md](./PASSWORD_RESET_FEATURE.md) - 密码重置详细文档
- Next.js 文档：https://nextjs.org/docs
- shadcn/ui 文档：https://ui.shadcn.com/

---

**测试愉快！🎉**

